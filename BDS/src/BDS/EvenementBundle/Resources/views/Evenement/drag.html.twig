{% extends "BDSEvenementBundle::layout.html.twig" %}

{% block title %}
  Voir - {{ parent() }}
{% endblock %}

{% block bds_evenement_body %}
<h2>Voir l'evenement</h2>
<div class="panel panel-primary">
	<div class="panel-heading">
		<h3 class="panel-title">{{ evenement.nom }}</h3>
	</div>
	<div class="panel-body">
		<p>commence le {{ evenement.debutEvenement | date('d/m/Y') }}</p>
		<p>fini le {{ evenement.finEvenement | date('d/m/Y') }}</p>
		
		{% if evenement.lieu %}
			<p> à {{ evenement.lieu.fullAdr }}</p>
			{# la map #}
			<div id="map" style="height: 300px; margin-top: 10px;"></div>
		{% endif %}
		<ul class="nav nav-tabs", id="panneau">
			<li><a href="{{ path('bds_evenement_view', {'domaine': domaine.nom, 'id': evenement.id, 'affichage': 'liste'}) }}">liste</a></li>
			<li class="active"><a href="#">drag n drop</a></li>
		</ul>
		<div>
			<ul id="dropzone" class="list-unstyled">
				<li id="dropper_oui" class="alert alert-success">
					<h2>oui</h2>
					{% for participation in participationOui %}
						<p class="btn btn-default">{{ participation.membre.user.username }}</p>
					{% endfor %}
				</li>
				<li id="dropper_non" class="alert alert-danger">
					<h2>non</h2>
					{% for participation in participationNon %}
						<p class="btn btn-default">{{ participation.membre.user.username }}</p>
					{% endfor %}
				</li>
				<li id="dropper_aucun" class="alert alert-warning">
					<h2>aucun</h2>
					{% for participation in participationAucun %}
						<p class="btn btn-default">{{ participation.membre.user.username }}</p>
					{% endfor %}
				</li>
			</ul>
		<div>
			<div class="hidden">
				{{ form_start(form, {'attr': {'class': 'form-horizontal'}})}}
		
				{# les erreurs du formulaire #}
				{{ form_errors(form) }}
				
				{# on plac la liste des champs participations #}
				<ul class="list-unstyled">
					{% for participation in form.participations %}
						<li id="{{ objParticipations[loop.index0].membre.user.username }}">
							{{ form_label(participation, objParticipations[loop.index0].membre.user.username, {'label_attr': {'class':'control-label', 'name':'participation'}}) }}
							{{ form_widget(participation)}}
						</li>
					{% endfor %}
				</ul>
				{# génération automatique de tout le reste #}
				{{ form_rest(form) }}
			</div>
			
			<button type="submit" class="btn btn-default">enregistrer les modifications</button>
	
			{# fermeture de la balise form #}
			{{ form_end(form) }}
	
		</div>
	</div>
</div>
		
	   	<a class="btn btn-lg btn-warning" href="{{ path('bds_evenement_edit', {'domaine':domaine.nom, 'id':evenement.id}) }}">éditer l'evenement</a>
   		<a class="btn btn-lg btn-danger" href="{{ path('bds_evenement_delete', {'domaine':domaine.nom, 'id': evenement.id}) }}">supprimer l'evenement</a>
   		<a class="btn btn-lg btn-primary" href="{{ path('bds_evenement_index', {'domaine':domaine.nom}) }}">retour aux évènements</a>
</div>


{% endblock %}

{% block javascripts %}
{{ parent() }}

<script async defer 
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC5TPr8jCgNyH1D0gOV8u968DIIijQIBIY&libraries=places&callback=initMap">
</script>
<script type="text/javascript" src="{{ asset('js/map.js') }}"></script>
<script type="text/javascript">
{% if evenement.lieu %}
	var myLat = {{ evenement.lieu.lat }};
	var myLng = {{ evenement.lieu.lng }};
	var fullAdr = "{{ evenement.lieu.fullAdr }}";
{% endif %}
</script>
<script type="text/javascript" src="{{ asset('js/drag_n_drop.js') }}"></script>

{% endblock %}

